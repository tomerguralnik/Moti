

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>moti.utils package &mdash; moti 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> moti
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">moti.utils package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-moti.utils.connection">moti.utils.connection module</a></li>
<li><a class="reference internal" href="#module-moti.utils.consumer">moti.utils.consumer module</a></li>
<li><a class="reference internal" href="#module-moti.utils.database_reader">moti.utils.database_reader module</a></li>
<li><a class="reference internal" href="#module-moti.utils.handle_config">moti.utils.handle_config module</a></li>
<li><a class="reference internal" href="#module-moti.utils.listener">moti.utils.listener module</a></li>
<li><a class="reference internal" href="#module-moti.utils.misc">moti.utils.misc module</a></li>
<li><a class="reference internal" href="#module-moti.utils.parser">moti.utils.parser module</a></li>
<li><a class="reference internal" href="#module-moti.utils.protocol">moti.utils.protocol module</a></li>
<li><a class="reference internal" href="#module-moti.utils.publisher">moti.utils.publisher module</a></li>
<li><a class="reference internal" href="#module-moti.utils.reader">moti.utils.reader module</a></li>
<li><a class="reference internal" href="#module-moti.utils.transfer">moti.utils.transfer module</a></li>
<li><a class="reference internal" href="#module-moti.utils">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">moti</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>moti.utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/moti.utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="moti-utils-package">
<h1>moti.utils package<a class="headerlink" href="#moti-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="moti.utils.publishers.html">moti.utils.publishers package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="moti.utils.publishers.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="moti.utils.publishers.html#module-moti.utils.publishers.rabbitmq_parser_publisher">moti.utils.publishers.rabbitmq_parser_publisher module</a></li>
<li class="toctree-l2"><a class="reference internal" href="moti.utils.publishers.html#module-moti.utils.publishers.rabbitmq_server_publisher">moti.utils.publishers.rabbitmq_server_publisher module</a></li>
<li class="toctree-l2"><a class="reference internal" href="moti.utils.publishers.html#module-moti.utils.publishers">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-moti.utils.connection">
<span id="moti-utils-connection-module"></span><h2>moti.utils.connection module<a class="headerlink" href="#module-moti.utils.connection" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.connection.Connection">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.connection.</code><code class="sig-name descname">Connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sock</span></em>, <em class="sig-param"><span class="n">addr</span><span class="o">=</span><span class="default_value">'127.0.0.1', 8000</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Connection is a simplification of socket for the purposes of
the client-server connection</p>
<dl class="py method">
<dt id="moti.utils.connection.Connection.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the socket, hence the conection</p>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.connection.Connection.connect">
<code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">port</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Connection to (host, port)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em>) – ip</p></li>
<li><p><strong>port</strong> (<em>int</em>) – port</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.connection.Connection.receive">
<code class="sig-name descname">receive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection.receive" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a message of size exactly size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size</strong> (<em>int</em>) – size of expected message</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.connection.Connection.receive_message">
<code class="sig-name descname">receive_message</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection.receive_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive one message (length, message) and return message</p>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.connection.Connection.send">
<code class="sig-name descname">send</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection.send" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>bytes</em>) – data to send</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.connection.Connection.send_message">
<code class="sig-name descname">send_message</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection.send_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message and it’s length in the beggining</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em>) – a message to send</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.connection.Connection.send_message_to_addr">
<code class="sig-name descname">send_message_to_addr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection.send_message_to_addr" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message and it’s length in the beggining to self.addr</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em>) – a message to send</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.connection.Connection.sendto">
<code class="sig-name descname">sendto</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em>, <em class="sig-param"><span class="n">addr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.connection.Connection.sendto" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>bytes</em>) – a messsage to send</p></li>
<li><p><strong>addr</strong> (<em>tuple</em>) – address to send the message to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-moti.utils.consumer">
<span id="moti-utils-consumer-module"></span><h2>moti.utils.consumer module<a class="headerlink" href="#module-moti.utils.consumer" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.consumer.Consumer">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.consumer.</code><code class="sig-name descname">Consumer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mq_url</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.consumer.Consumer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A consumer is basically a generalized message queue consumer
One can choose which consumer they want to use
for example: the rabbitmq_consumer that is in the consumers directory
A consumer must have the following methods:
consumer.add_queue(queue, callback): which tells the consumer how to consume the queue
consumer.consume(): which makes the consumer to start consuming on all queues added
A consumer must have a class variable ‘protocol’ which is basically it’s name</p>
<dl class="py method">
<dt id="moti.utils.consumer.Consumer.add_queue">
<code class="sig-name descname">add_queue</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em>, <em class="sig-param"><span class="n">callback</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.consumer.Consumer.add_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the queue to the consumer with the callback function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queue</strong> (<em>str</em>) – name of queue</p></li>
<li><p><strong>callback</strong> (<em>callable</em>) – callback function for queue consumption</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.consumer.Consumer.consume">
<code class="sig-name descname">consume</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.consumer.Consumer.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Start consuming</p>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.consumer.Consumer.get_consumers">
<code class="sig-name descname">get_consumers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.consumer.Consumer.get_consumers" title="Permalink to this definition">¶</a></dt>
<dd><p>Import all consumers in ./utils/consumers
Every consumer should have ‘consumer’ in the name of it’s file
Only one consumer per file
The name of file should be in snake case
The name of consumer should be in camel case and the same as file’s name
The consumer should have ‘protocol’ variable so it can be chosen by that variable</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-moti.utils.database_reader">
<span id="moti-utils-database-reader-module"></span><h2>moti.utils.database_reader module<a class="headerlink" href="#module-moti.utils.database_reader" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.database_reader.DatabaseReader">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.database_reader.</code><code class="sig-name descname">DatabaseReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">database_url</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.database_reader.DatabaseReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>DatabaseReader is a reader for a general database
One can choose which reader they want to use
for example: mongo_reader that is in dbreaders directory
A reader must have the following methods:
reader.find(collection, filters): finds all entries in the collection that pass the filters
reader.find_one(collection, filters): finds one entry in the collection that pass the filters
A reader must also have a ‘db’ class variable which is basically it’s name</p>
<dl class="py method">
<dt id="moti.utils.database_reader.DatabaseReader.find">
<code class="sig-name descname">find</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">collection</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.database_reader.DatabaseReader.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all entries in the collection that pass the filters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection</strong> (<em>str</em>) – the collection to access</p></li>
<li><p><strong>filters</strong> (<em>dict</em><em>(</em><em>,</em><em>optional</em><em>)</em>) – the filters to apply on the search (usally a dictionary), defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of all results in the collection that match the filters</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.database_reader.DatabaseReader.find_one">
<code class="sig-name descname">find_one</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">collection</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.database_reader.DatabaseReader.find_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an entry in the colleciton that passes the filters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection</strong> (<em>str</em>) – the collection to access</p></li>
<li><p><strong>filters</strong> (<em>dict</em><em>(</em><em>,</em><em>optional</em><em>)</em>) – the filters to apply on the search (usally a dictionary), defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of all results in the collection that match the filters</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.database_reader.DatabaseReader.get_readers">
<code class="sig-name descname">get_readers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.database_reader.DatabaseReader.get_readers" title="Permalink to this definition">¶</a></dt>
<dd><p>Import all dbreaders in ./utils/dbreaders
Every dbreader should have ‘reader’ in the name of it’s file
Only one dbreader per file
The name of file should be in snake case
The name of dbreader should be in camel case and the same as file’s name
The dbreader should have ‘db’ variable so it can be chosen by that variable</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-moti.utils.handle_config">
<span id="moti-utils-handle-config-module"></span><h2>moti.utils.handle_config module<a class="headerlink" href="#module-moti.utils.handle_config" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.handle_config.Config_handler">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.handle_config.</code><code class="sig-name descname">Config_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">part</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.handle_config.Config_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

</div>
<div class="section" id="module-moti.utils.listener">
<span id="moti-utils-listener-module"></span><h2>moti.utils.listener module<a class="headerlink" href="#module-moti.utils.listener" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.listener.Listener">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.listener.</code><code class="sig-name descname">Listener</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">port</span></em>, <em class="sig-param"><span class="n">host</span><span class="o">=</span><span class="default_value">'0.0.0.0'</span></em>, <em class="sig-param"><span class="n">backlog</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">reuseaddr</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.listener.Listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Listener is basically a socket that listens but when it accepts
a connection it returns a Connection instead of socket</p>
<dl class="py method">
<dt id="moti.utils.listener.Listener.accept">
<code class="sig-name descname">accept</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.listener.Listener.accept" title="Permalink to this definition">¶</a></dt>
<dd><p>Accept a connection</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a Connection object representing the connection</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Conneciton</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.listener.Listener.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.listener.Listener.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start listening fro connections</p>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.listener.Listener.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.listener.Listener.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the listening socket</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-moti.utils.misc">
<span id="moti-utils-misc-module"></span><h2>moti.utils.misc module<a class="headerlink" href="#module-moti.utils.misc" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="moti.utils.misc.camel_from_snake">
<code class="sig-prename descclassname">moti.utils.misc.</code><code class="sig-name descname">camel_from_snake</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.misc.camel_from_snake" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – a snake case name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name in camel case</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="moti.utils.misc.read_string">
<code class="sig-prename descclassname">moti.utils.misc.</code><code class="sig-name descname">read_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.misc.read_string" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a coroutine that given a string message reads a the message x chars at a time
when x has to be sent to it
To initiate: g = read_string(message), next(message)
Then to g.send(x) reads the next x bytes of message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em>) – a string</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-moti.utils.parser">
<span id="moti-utils-parser-module"></span><h2>moti.utils.parser module<a class="headerlink" href="#module-moti.utils.parser" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.parser.Parser">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.parser.</code><code class="sig-name descname">Parser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fields</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.parser.Parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The parser class collects all parsers in the parsers directory under the conditions:
1. the module the parser is inside of has a variable include and it’s set to 1
2. the name of parser begins with <a href="#id1"><span class="problematic" id="id2">parse_</span></a>
3. the parser has a variable called fields
After collecting all the parsers the fields variable will contain all the fields
there is a parsers to
The mapping variable contains a mapping between fields and parsers that parse them</p>
<dl class="py method">
<dt id="moti.utils.parser.Parser.decode_queue">
<code class="sig-name descname">decode_queue</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.parser.Parser.decode_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a queue name generated by generate_queues return the corresponding parser</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue</strong> (<em>str</em>) – queue name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a parser corresponding to the queue</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.parser.Parser.generate_queues">
<code class="sig-name descname">generate_queues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.parser.Parser.generate_queues" title="Permalink to this definition">¶</a></dt>
<dd><p>Create queue names based on availible parsers</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of queues based on availible parsers</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.parser.Parser.parse_field">
<code class="sig-name descname">parse_field</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">field</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">context</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.parser.Parser.parse_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all parsers corresponding to field and return
all of their results in a list
:param field: field name
:type field: str
:param data: data to parse
:tpye data: something that the parsers can parse
:param context: context for parser to save it’s data at
:type: str
:return: a list containing the data parsed by every parser that parses this field
:rtype: list</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-moti.utils.protocol">
<span id="moti-utils-protocol-module"></span><h2>moti.utils.protocol module<a class="headerlink" href="#module-moti.utils.protocol" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.protocol.Config">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.protocol.</code><code class="sig-name descname">Config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fields</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="moti.utils.protocol.Config.deserialize">
<code class="sig-name descname">deserialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Config.deserialize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>bytes</em>) – a serialized config message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Config class instance</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#moti.utils.protocol.Config" title="moti.utils.protocol.Config">Config</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.protocol.Config.serialize">
<code class="sig-name descname">serialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Config.serialize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a serialized Config object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bytes</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="moti.utils.protocol.Hello">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.protocol.</code><code class="sig-name descname">Hello</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user_id</span></em>, <em class="sig-param"><span class="n">user_name</span></em>, <em class="sig-param"><span class="n">birth_date</span></em>, <em class="sig-param"><span class="n">gender</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Hello" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="moti.utils.protocol.Hello.deserialize">
<code class="sig-name descname">deserialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Hello.deserialize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>bytes</em>) – a serialized hello message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Hello class instance</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#moti.utils.protocol.Hello" title="moti.utils.protocol.Hello">Hello</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.protocol.Hello.serialize">
<code class="sig-name descname">serialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Hello.serialize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a serialized Hello object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bytes</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="moti.utils.protocol.Snapshot">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.protocol.</code><code class="sig-name descname">Snapshot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">translation</span></em>, <em class="sig-param"><span class="n">rotation</span></em>, <em class="sig-param"><span class="n">color_image</span></em>, <em class="sig-param"><span class="n">depth_image</span></em>, <em class="sig-param"><span class="n">feelings</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py class">
<dt id="moti.utils.protocol.Snapshot.Image">
<em class="property">class </em><code class="sig-name descname">Image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">height</span></em>, <em class="sig-param"><span class="n">width</span></em>, <em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">fmt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Snapshot.Image" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="moti.utils.protocol.Snapshot.Image.compactify">
<code class="sig-name descname">compactify</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timestamp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Snapshot.Image.compactify" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>Path</em>) – a base_path to save the Image to</p></li>
<li><p><strong>timestamp</strong> (<em>int</em>) – timestamp</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary with all of image’s fields but the image is saved to file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.protocol.Snapshot.Image.deserialize">
<code class="sig-name descname">deserialize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">height</span></em>, <em class="sig-param"><span class="n">width</span></em>, <em class="sig-param"><span class="n">fmt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Snapshot.Image.deserialize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>bytes</em>) – a serialized image message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Image class instance</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#moti.utils.protocol.Snapshot.Image" title="moti.utils.protocol.Snapshot.Image">Image</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.protocol.Snapshot.Image.serialize">
<code class="sig-name descname">serialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Snapshot.Image.serialize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a serialized Image object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bytes</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt id="moti.utils.protocol.Snapshot.compactify">
<code class="sig-name descname">compactify</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Snapshot.compactify" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Path</em>) – base path to sabe the iamges</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictironary with all the snapshot’s fields but images are saved to file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.protocol.Snapshot.deserialize">
<code class="sig-name descname">deserialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Snapshot.deserialize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>bytes</em>) – a serialized snapshot message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Snapshot class instance</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#moti.utils.protocol.Snapshot" title="moti.utils.protocol.Snapshot">Snapshot</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.protocol.Snapshot.serialize">
<code class="sig-name descname">serialize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fields</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.protocol.Snapshot.serialize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a serialized Image object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bytes</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-moti.utils.publisher">
<span id="moti-utils-publisher-module"></span><h2>moti.utils.publisher module<a class="headerlink" href="#module-moti.utils.publisher" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.publisher.Publisher">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.publisher.</code><code class="sig-name descname">Publisher</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queues</span></em>, <em class="sig-param"><span class="n">mq_url</span></em>, <em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'Server'</span></em>, <em class="sig-param"><span class="n">parsers</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.publisher.Publisher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Publisher is a general publisher of data
One can choose which publisher they want to use
for example: the rabbitmq_parser_publisher that is in the publishers directory
A publisher must have one of the following methods:
publisher.publish(snapshot): which publishes with snapshot
publisher.publish_factory(snapshot, queue): which publishes the snapshot to a specific queue</p>
<blockquote>
<div><p>the publish_factory method can also change the format of publishing depending on the queue</p>
</div></blockquote>
<p>A publisher must have a class variable ‘protocol’ which is basically it’s name</p>
<dl class="py method">
<dt id="moti.utils.publisher.Publisher.get_publishers">
<code class="sig-name descname">get_publishers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.publisher.Publisher.get_publishers" title="Permalink to this definition">¶</a></dt>
<dd><p>Import all publishers in ./utils/publishers
Every publisher should have ‘publisher’ in the name of it’s file
Only one publisher per file
The name of file should be in snake case
The name of publisher should be in camel case and the same as file’s name
The publisher should have ‘protocol’ variable so it can be chosen by that variable</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-moti.utils.reader">
<span id="moti-utils-reader-module"></span><h2>moti.utils.reader module<a class="headerlink" href="#module-moti.utils.reader" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.reader.Reader">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.reader.</code><code class="sig-name descname">Reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">reader</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.reader.Reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Reader is a general reader of data
One can choose which reader they want to use
for example: the proto_reader that is in the readers directory
A reader must have the following methods:
reader.get_user(): which reads the user details from the smaple file
reader.get_snapshot(): which reads the next snapshot and returns a dict object
A reader must have a class variable ‘reader’ which is basically it’s name</p>
<dl class="py method">
<dt id="moti.utils.reader.Reader.get_readers">
<code class="sig-name descname">get_readers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.reader.Reader.get_readers" title="Permalink to this definition">¶</a></dt>
<dd><p>Import all readers in ./utils/readers
Every reader should have ‘reader’ in the name of it’s file
Only one reader per file
The name of file should be in snake case
The name of reader should be in camel case and the same as file’s name
The reader should have ‘reader’ variable so it can be chosen by that variable</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="moti.utils.reader.ReaderSnapshot">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.reader.</code><code class="sig-name descname">ReaderSnapshot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dic</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.reader.ReaderSnapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Trun the dictionary from get_snapshot into a class for convinience</p>
</dd></dl>

</div>
<div class="section" id="module-moti.utils.transfer">
<span id="moti-utils-transfer-module"></span><h2>moti.utils.transfer module<a class="headerlink" href="#module-moti.utils.transfer" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="moti.utils.transfer.Transfer">
<em class="property">class </em><code class="sig-prename descclassname">moti.utils.transfer.</code><code class="sig-name descname">Transfer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_url</span></em>, <em class="sig-param"><span class="n">queues</span></em>, <em class="sig-param"><span class="n">publish_factory</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">publish</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.transfer.Transfer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Transfer is class that recives a publishing method and queue to consume from
It sets up a Consumer and adds all the queues in queues with the appropriate
callback functions
The start method begins the consumers consumption
The transfer should be initialized with either a publish factory or a publish
publish factory takes precedence</p>
<dl class="py method">
<dt id="moti.utils.transfer.Transfer.callback_factory">
<code class="sig-name descname">callback_factory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.transfer.Transfer.callback_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a callback function of the right format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue</strong> (<em>str</em>) – name of a queue</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>creates a callback functions fit for message queues</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="moti.utils.transfer.Transfer.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#moti.utils.transfer.Transfer.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-moti.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-moti.utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Tomer Guralnik

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>